
<html>
    <head>
      <title>Leaflet</title>
      <link rel="stylesheet" href="assets/leaflet/leaflet.css" />
      <script src="assets/leaflet/leaflet-bing.js"></script>
      <!-- <script src="assets/leaflet/Bing.js"></script> -->
        <script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>
    </head>
    <body>
        <div style="width:640px; height:480px;" id="map"></div>
        <style>
            .whitetext {color: #fff;}
            .leaflet-icon div {
                text-align: center;
                border: none;
                font-size: 15px;
                font-weight: 700;
                line-height: 1.8em;
                background-repeat: no-repeat;
                background-position: center;
                width: 100%;
                height: 100%;
            }
            .leaflet-icon [class*="fa"] {
                margin-top: 25%;
            }
        </style>
        <script type='text/javascript'>
            /*-- Function to create encode SVG  --*/
            /* colors needd to be hex code without # */
            // createSVGIcon("9d2235", "222", "whitetext", "1"); 
            var createSVGIcon = function(fillColor,strokeColor,labelClass,labelText) {
                var svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 27.77" aria-labelledby="pinTitle" role="img"><title id="mapTitle">Basic Map Pin</title><path d="M9.5,26.26l.57-.65c.29-.4,7.93-9.54,7.93-15.67A8.75,8.75,0,0,0,9.5,1,8.75,8.75,0,0,0,1,9.94c0,6,7.54,15.27,7.93,15.67l.57.65Z" fill="#'+ fillColor +'" stroke="#'+ strokeColor +'" stroke-miterlimit="10" stroke-width="1"/></svg>';      
                var encoded = window.btoa(svg);
                var backgroundImage = "background-image: url(data:image/svg+xml;base64,"+encoded+")";
                return '<div style="'+ backgroundImage +'" class="'+ labelClass +'">'+ labelText +'</div>';
            }
            /* Function to create divIcon for leaflet map */
            // createLabelIcon("leaflet-icon","A");
            var createLabelIcon = function(labelClass,labelText){
                return L.divIcon({ 
                    className: labelClass,
                    html: labelText,
                    iconSize: new L.Point(28, 41),
                    iconAnchor: new L.Point(14, 43),
                    popupAnchor: [0, -43]
                })
            }
          var map = new L.Map('map', {center: new L.LatLng(34.74376029995541, -92.31828863640054), zoom: 16 });
          map.attributionControl.setPrefix(''); // Don't show the 'Powered by Leaflet' text.
          // var osm = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
          // for all possible values and explanations see "Template Parameters" in https://msdn.microsoft.com/en-us/library/ff701716.aspx
          var imagerySet = "Road"; // AerialWithLabels | Birdseye | BirdseyeWithLabels | Road
          var bing = new L.BingLayer("AnCRy0VpPMDzYT6rOBqqqCNvNbUWvdSOv8zrQloRCGFnJZU28JK3c6cQkCMAHtCd", {type: imagerySet});
          map.addLayer(bing);
          /* [lat, lon, fillColor, strokeColor, labelClass, iconText, popupText] */
          var markers = [  
            [ 34.74376029995541, -92.31828863640054, "00F","000","whitetext","A","I am a blue icon." ],
            [ 34.747936, -92.319445, "0C0","FFF","",'<i class="fas fa-circle fa-sm"></i>',"I am a green icon." ],
            [ 34.749615, -92.320300, "9d2235","000","whitetext","<i class=\"fas fa-hospital-alt fa-sm\"></i>",'<strong>Central Building</strong><br/>4301 W. Markham St. Little Rock, AR 72210 <a class="" href="https://www.google.com/maps?daddr=4301 W. Markham St. Little Rock, AR 72210&amp;t=m&amp;layer=1&amp;doflg=ptk&amp;om=0" target="_blank" title="Get directions">(Directions)</a>' ],
            [ 34.748532, -92.321607, "eee","000","","<i class=\"fas fa-hospital fa-sm\"></i>","" ]
          ]
          //Loop through the markers array
          var markerArray = [];
          for (var i=0; i<markers.length; i++) {
           
            var lat = markers[i][0];
            var lon = markers[i][1];
            var fillColor = markers[i][2];
            var strokeColor = markers[i][3];
            var labelClass = markers[i][4];
            var iconText = markers[i][5];
            var popupText = markers[i][6];

            var markerLocation = new L.LatLng(lat, lon);
            marker = new L.marker([lat, lon], { icon: createLabelIcon("leaflet-icon", createSVGIcon(fillColor,strokeColor,labelClass,iconText))}); //.bindPopup(popupText).addTo(map);
            if (popupText)
                marker.bindPopup(popupText, { maxWidth: '240' });
            marker.addTo(map);
            //console.log(marker);
            

            //marker.bindPopup(popupText);
            //console.log([lat, lon]);
            markerArray.push(markerLocation);
            //console.log(bounds);
            //var group = L.featureGroup(markerArray);
          }

          //L.marker([34.74376029995541, -92.31828863640054], { icon: createLabelIcon("leaflet-icon",createSVGIcon("00F","000","whitetext","A"))}).addTo(map).bindPopup("I am a blue icon.");
          //L.marker([34.747936, -92.319445], { icon: createLabelIcon("leaflet-icon",createSVGIcon("9d2235","000","whitetext",'<i class="fas fa-hospital-alt fa-sm"></i>')) }).addTo(map).bindPopup("I am a red icon.");
        //    p1 = new L.LatLng(34.74376029995541, -92.31828863640054),
        //    p2 = new L.LatLng(34.747936, -92.319445),
        //    group = new L.LatLngBounds(p1, p2);
        //    console.log(group);
          group = new L.LatLngBounds(markerArray);
          //console.log(group);
          // var group = L.featureGroup(markerArray);
          map.fitBounds(group, {padding: [100, 75]});
          //map.fitBounds(group.latLngBounds(), {padding: [50, 50]});
        //   L.marker([51.49, -0.1], {icon: orangeIcon}).addTo(map).bindPopup("I am an orange leaf.");
        </script>
    </body>
  </html>