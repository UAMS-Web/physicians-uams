/*
 * jQuery simple and accessible modal window, using ARIA
 * @version v1.10.0
 * Website: https://a11y.nicolas-hoffmann.net/modal/
 * License MIT: https://github.com/nico3333fr/jquery-accessible-modal-window-aria/blob/master/LICENSE
 */
jQuery(document).ready(function(a){var e=a(".js-modal"),o=a("body");e.each(function(e){var o=e+1;a(this).attr({id:"label_modal_"+o,"aria-haspopup":"dialog"})});0===a("#js-modal-page").length&&o.wrapInner('<div id="js-modal-page"></div>'),o.on("click",".js-modal",function(e){var l,d=a(this),t=d.data(),s=d.attr("id"),i=void 0!==t.modalPrefixClass?t.modalPrefixClass+"-":"",n=t.modalText||"",c=void 0!==t.modalContentId?t.modalContentId:"",r=void 0!==t.modalContentId?a("#"+c):"",m=t.modalTitle||"",v=t.modalCloseText||"Close",u=t.modalCloseTitle||t.modalCloseText,f=t.modalCloseImg||"",g=t.modalBackgroundClick||"",p=t.modalFocusId||"",j=void 0!==t.modalAriaModal?'aria-modal="true"':"",b=void 0!==t.modalUseRoleAlertdialog?'role="alertdialog"':"",k=void 0!==t.modalRemoveRoleDialog||'role="alertdialog"'===b?"":'role="dialog"',h=void 0!==t.modalRemoveDialogTag?"div":"dialog",y=a("#js-modal-page");l="<"+h+" "+k+" "+b+' id="js-modal" class="'+i+'modal" aria-labelledby="modal-title" open '+j+'><div role="document" class="'+i+'modal__wrapper">',l+='<button type="button" id="js-modal-close" class="'+i+'modal-close" data-content-back-id="'+c+'" data-focus-back="'+s+'" title="'+u+'">',l+=""!==f?'<img src="'+f+'" alt="'+v+'" class="'+i+'modal__closeimg" />':'<span class="'+i+'modal-close__text">'+v+"</span>",l+="</button>",l+='<div class="'+i+'modal__content">',""!==m&&(l+='<h1 id="modal-title" class="'+i+'modal-title">'+m+"</h1>"),""!==n?l+="<p>"+n+"</p>":""!==c&&r.length&&(l+='<div id="js-modal-content">',l+=r.html(),l+="</div>",r.empty()),a(l+="</div></div></"+h+">").insertAfter(y),o.addClass("no-scroll"),y.attr("aria-hidden","true"),a("disabled"!==g?'<span id="js-modal-overlay" class="'+i+'modal-overlay" title="'+u+'" data-background-click="enabled"><span class="invisible">'+v+"</span></span>":'<span id="js-modal-overlay" class="'+i+'modal-overlay" data-background-click="disabled"></span>').insertAfter(a("#js-modal")),""!==p?a("#"+p).focus():a("#js-modal-close").focus(),e.preventDefault()}),o.on("click","#js-modal-close",function(){var e=a(this),l="#"+e.attr("data-focus-back"),d=e.attr("data-content-back-id"),t=a("#js-modal"),s=a("#js-modal-content"),i=t.attr("class"),n=i+"--reverse",c=a("#js-modal-overlay");a("#js-modal-page").removeAttr("aria-hidden");var r=t.css("animation-duration");if("0s"!=r){var m=1e3*parseFloat(r.replace("s",""));m++,t.removeClass(i),setTimeout(function(){t.addClass(n)},1),setTimeout(function(){o.removeClass("no-scroll"),t.remove(),c.remove(),""!==d&&a("#"+d).html(s.html()),a(l).focus(),t.removeClass(n),t.addClass(i)},m)}else o.removeClass("no-scroll"),t.remove(),c.remove(),""!==d&&a("#"+d).html(s.html()),a(l).focus()}).on("click","#js-modal-overlay",function(e){var o=a("#js-modal-close");e.preventDefault(),o.trigger("click")}).on("click",".js-modal-close",function(e){var o=a("#js-modal-close");e.preventDefault(),o.trigger("click")}).on("keydown","#js-modal-overlay",function(e){var o=a("#js-modal-close");13!=e.keyCode&&32!=e.keyCode||(e.preventDefault(),o.trigger("click"))}).on("keydown","#js-modal",function(e){var o=a(this),l=a("#js-modal-close");if(27==e.keyCode&&l.trigger("click"),9==e.keyCode){var d=o.find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),t=a(document.activeElement),s=d.length,i=d.index(t);e.shiftKey||i!=s-1||(d.get(0).focus(),e.preventDefault()),e.shiftKey&&0==i&&(d.get(s-1).focus(),e.preventDefault())}}).on("keyup",":not(#js-modal)",function(e){var o=a("#js-modal"),l=!!a(document.activeElement).parents("#js-modal").length,d=a("#js-modal-close");o.length&&9==e.keyCode&&!1===l&&d.focus()}).on("focus","#js-modal-tabindex",function(){a("#js-modal-close").focus()})});